
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../4/">
      
      
        <link rel="next" href="../6/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>The Fundamentals of Controls - The FRC Programming Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="yellow">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-fundamentals-of-controls" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="The FRC Programming Guide" class="md-header__button md-logo" aria-label="The FRC Programming Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The FRC Programming Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The Fundamentals of Controls
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="The FRC Programming Guide" class="md-nav__button md-logo" aria-label="The FRC Programming Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The FRC Programming Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to the Frc Programming Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basic Frc Programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Basic Frc Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First Steps with WPILib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Based Programming Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Subsystems and Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Triggers and User Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    The Fundamentals of Controls
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    The Fundamentals of Controls
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pid" class="md-nav__link">
    <span class="md-ellipsis">
      PID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-proportional" class="md-nav__link">
    <span class="md-ellipsis">
      1. Proportional
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-integral" class="md-nav__link">
    <span class="md-ellipsis">
      2. Integral
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-derivative" class="md-nav__link">
    <span class="md-ellipsis">
      3. Derivative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-pid-equation" class="md-nav__link">
    <span class="md-ellipsis">
      The PID Equation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feed-forward" class="md-nav__link">
    <span class="md-ellipsis">
      Feed Forward
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feed Forward">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      Under the Hood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trapezoidal-motion-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Trapezoidal Motion Profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-downside-of-feedforward" class="md-nav__link">
    <span class="md-ellipsis">
      The Downside of FeedForward
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pid-feed-forward" class="md-nav__link">
    <span class="md-ellipsis">
      PID + Feed Forward
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The TalonFX Motor Controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Commands and Command Groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Logging and Visualization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced Frc Programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Advanced Frc Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suppliers, Comsumers, and Optionals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Swerve with CTRE Swerve Drive
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pathplanning with Pathplanner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vision with PhotonVision
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AdvantageKit and Replay Systems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Physics Simulation with MapleSim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Advanced-FRC-Programming/7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unit Testing and Mocks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How To Troubleshoot
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pid" class="md-nav__link">
    <span class="md-ellipsis">
      PID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-proportional" class="md-nav__link">
    <span class="md-ellipsis">
      1. Proportional
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-integral" class="md-nav__link">
    <span class="md-ellipsis">
      2. Integral
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-derivative" class="md-nav__link">
    <span class="md-ellipsis">
      3. Derivative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-pid-equation" class="md-nav__link">
    <span class="md-ellipsis">
      The PID Equation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feed-forward" class="md-nav__link">
    <span class="md-ellipsis">
      Feed Forward
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feed Forward">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#under-the-hood" class="md-nav__link">
    <span class="md-ellipsis">
      Under the Hood
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trapezoidal-motion-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Trapezoidal Motion Profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-downside-of-feedforward" class="md-nav__link">
    <span class="md-ellipsis">
      The Downside of FeedForward
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pid-feed-forward" class="md-nav__link">
    <span class="md-ellipsis">
      PID + Feed Forward
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="the-fundamentals-of-controls"><strong>The Fundamentals of Controls</strong></h1>
<p>So now we know how to make subsystems, create commands, and bind those commands to triggers. But how do we actually control a motor to make it do what we want to do?</p>
<p>Here is where control theory comes in. In this lesson we are going to cover PID and FeedForward control. These are both common types of controls that are used all over FRC. We will end the lesson by combining the two methods of control utilizing something called a trapezoidal motion profile.</p>
<h2 id="pid"><strong>PID</strong></h2>
<p>PID is a form closed loop control. Closed loop control is where a control system activly uses feedback from motors or encoders to adjust for disturbances and noise in a system. PID is a system of control involving three gains: Proportional, Integral, and Derivative.</p>
<figure>
    <img alt="PID Controller" src="../../img/pid_controller.png" width="600" />
<br />
<figcaption>A Diagram of the PID Controller System</figcaption>
</figure>
<h3 id="1-proportional"><strong>1. Proportional</strong></h3>
<ul>
<li>This term scales linearly with the distance away from the setpoint</li>
<li>It covers the majority of the output of the controller</li>
</ul>
<h3 id="2-integral"><strong>2. Integral</strong></h3>
<ul>
<li>This term scales linearly with the area under the curve between the setpoint and ouput</li>
<li>Used for small positional errors that proportional can't overcome</li>
</ul>
<h3 id="3-derivative"><strong>3. Derivative</strong></h3>
<ul>
<li>This term scales based on the velocity of the output</li>
<li>Often not necessary for control</li>
</ul>
<h3 id="the-pid-equation"><strong>The PID Equation</strong></h3>
<p>Each of these terms are combined into this equation:</p>
<p>
<script type="math/tex; mode=display">
u\left(t\right)=K_{p}e\left(t\right)+K_{i}\int_{0}^{t}e\left(\tau\right)d\tau+K_{d}\frac{de\left(t\right)}{dt}
</script>
</p>
<h3 id="tuning"><strong>Tuning</strong></h3>
<p>Tuning a PID controller is a somewhat difficult process. Generally start by increasing the proportional term until the system oscilates around the setpoint. Back this term off a little. Then if the system overshoots the target increase the derivative term. If the system has a steady state error where it doesn't quite reach the target increase the integral term. Other than that its alot of trial and error to find the right values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In control theory you will often see the motor or mechanism your trying to control refered to as the <code>plant</code>.</p>
</div>
<p>Try to see if you can find gains that will reach the setpoint without overshooting in this PID simulator:</p>
<div id="chartContainer" style="width:700px; height: 400px; background: #2d2d2d; border-radius: 8px; margin-bottom: 20px;">
    <canvas id="pidChart" style="width: 100%; height: 100%;"></canvas>
</div>

<div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 20px;">
    <div style="margin: 10px 0; width: 300px;">
        <label for="kp" style="display: block; margin-bottom: 5px;">K (Proportional): <span id="kpValue" style="font-size: 18px; font-weight: bold; color: #ff6b6b;">0.0</span></label>
        <input type="range" id="kp" min="0" max="1" step="0.01" value="0.0" style="width: 100%; height: 8px; background: #333; outline: none; border-radius: 4px;">
        <style>
            input[type="range"]::-webkit-slider-thumb {
                -webkit-appearance: none;
                width: 20px;
                height: 20px;
                background: #ff6b6b;
                border-radius: 50%;
                cursor: pointer;
            }
        </style>
    </div>
    <div style="margin: 10px 0; width: 300px;">
        <label for="ki" style="display: block; margin-bottom: 5px;">Ki (Integral): <span id="kiValue" style="font-size: 18px; font-weight: bold; color: #ff6b6b;">0.0</span></label>
        <input type="range" id="ki" min="0" max="0.1" step="0.001" value="0.0" style="width: 100%; height: 8px; background: #333; outline: none; border-radius: 4px;">
    </div>
    <div style="margin: 10px 0; width: 300px;">
        <label for="kd" style="display: block; margin-bottom: 5px;">Kd (Derivative): <span id="kdValue" style="font-size: 18px; font-weight: bold; color: #ff6b6b;">0.0</span></label>
        <input type="range" id="kd" min="0" max="1" step="0.02" value="0.0" style="width: 100%; height: 8px; background: #333; outline: none; border-radius: 4px;">
    </div>
</div>

<script src="../../assets/pid-sim.js"></script>

<h2 id="feed-forward"><strong>Feed Forward</strong></h2>
<p>Feed forward control is the simplest form of control. It works off of a model of the system you are trying to control. Once you have that model, you just have to move the object to the goal. Since the model depends on the type of mechanism, Wpilib supplies different kinds of physics models to base our feed forward off of.</p>
<figure>
    <img alt="Feed Forward Diagram" src="../../img/feedforward.png" width="600" />
<br />
<figcaption>A Diagram of the Feed Forward Controller System</figcaption>
</figure>
<h3 id="under-the-hood"><strong>Under the Hood</strong></h3>
<p>Under the hood feed forward works of a physics model of the system. In the simplest system, without any gravity or external forces acting on a mechanism, the feed forward works of a model of a DC motor.
<script type="math/tex; mode=display">
V = K_s \cdot sgn(\dot{d}) + K_v \cdot \dot{d} + K_a \cdot \ddot{d}
</script>
This is called the voltage balance equation. It defines the relationship betwen applied motor voltage, rotor velocity, rotor acceleration. It is controlled using gains that represent the systems dynamics:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Kv</code></td>
<td>Voltage needed to "cruise" at a velocity</td>
</tr>
<tr>
<td><code>Ka</code></td>
<td>Voltage needed to induce a specific amount of acceleration</td>
</tr>
<tr>
<td><code>Ks</code></td>
<td>Voltage needed to overcome static friction</td>
</tr>
<tr>
<td><code>Kg</code></td>
<td>Voltage needed to overcome gravity (used in elevators and arms)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The gains for a feed forward system can be aquired in two ways. One way is to compute them using Sys-id. Sys-id involves capturing data about a mechanism and performing a regression to find the system gains. The other and more common way is to just calculate them. Using a tool like ReCalc you can calculate the theoretical values for a system based on things like motors, current limits, and dimensions.</p>
</div>
<h3 id="trapezoidal-motion-profiles"><strong>Trapezoidal Motion Profiles</strong></h3>
<p>Often times trapezoidal motion profiles are used alongside feed forward to have more control over system behavior. They allow us to set a desired acceleration and cruize velocity for the system to reach. This can be used to slow down a system based off limitations of the hardware. This trapezoid can be integrated to get the target position at any given time.</p>
<figure>
    <img alt="Trapezoidal Motion Profile" src="../../img/trapezoidal.png" width="600" />
<br />
<figcaption>A trapezoidal motion profile. Notice the shape of the position, velocity, and acceleration graphs.</figcaption>
</figure>
<h3 id="the-downside-of-feedforward"><strong>The Downside of FeedForward</strong></h3>
<p>Feed forward has one major downside over PID. Unlike PID, feed forward cant react to disturbances in the system. Things like data noise, battery voltage fluctuations, and latency can cause the system to not react deterministically. However, feed forward in a deterministic world will get to the setpoint faster. This is why we need to combine the two.</p>
<h2 id="pid-feed-forward"><strong>PID + Feed Forward</strong></h2>
<p>Combining PID and Feed forward allows us to get the advantages of both. Feed forward allows us to quickly get close to the setpoint, and PID allows us to combat system disturbances and accurately reach the setpoint. We can combine this with the idea of trapezoidal motion profiles as well. If we set the target of the pid and feed forward controller to be the current target of the trapezoidal profile, then we can have a lot of control over how the system will move to the setpoint.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>